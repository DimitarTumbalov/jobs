<div class="row justify-content-center">
  <div class="col-xl-3 col-lg-3 col-md-4 col-12 mb-3">
    <div class="col-12 bg-light p-4 shadow-sm">
      <h3 class="mb-3">Actions</h3>
      <div class="btn-group" style="flex-wrap: wrap;">
        <button (click)="onJobEdit(job.id)"
                *ngIf="currentUser?.id !== null && currentUser?.id === job?.userId"
                class="btn btn-warning shadow-none col-auto me-2">Edit
        </button>
        <button (click)="onJobDelete()" *ngIf="currentUser?.id !== null && currentUser?.id === job?.userId"
                class="btn btn-danger shadow-none col-auto me-2">Delete
        </button>
        <button (click)="onJobApply()"
                *ngIf="currentUser?.id !== job?.userId"
                [ngClass]="(job?.applied === true) ? 'btn-success' : 'btn-outline-success'"
                class="btn shadow-none col-auto me-2">
          {{(job?.applied === true) ? 'Applied' : 'Apply'}}
        </button>
        <button (click)="onJobLike()"
                [ngClass]="[currentUser?.id === job?.userId ? 'disabled' : '', (job?.likedByMe === true) ? 'btn-primary': 'btn-outline-primary']"
                class="btn shadow-none col-auto">
          Likes {{job?.likes !== null ? job?.likes?.length : 0}}
        </button>
      </div>
      <div *ngIf="currentUser?.id !== null &&  job?.userId === currentUser?.id">
        <h3 class="mt-4 mb-2">Applications</h3>
        <div class="btn-group" style="flex-wrap: wrap;">
          <ng-container *ngIf="job?.applications?.length">
            <div *ngFor="let application of job?.applications"
                 class="mt-1 d-flex flex-row justify-content-start align-items-center" style="width: 100%;">
              {{application.user?.firstName + ' ' + application.user?.lastName}}
              <p *ngIf="application?.accepted !== null"
                 [ngClass]="(application?.accepted === true ) ? 'text-success' : 'text-danger'"
                 class="ms-2 me-1 my-auto">
                {{application?.accepted === true ? '(Accepted)' : '(Rejected)' }}
              </p>
              <button (click)="onRejectApplication(application)" *ngIf="application?.accepted !== false"
                      class="btn bg-danger btn-sm text-light mx-1"
                      type="button">Reject
              </button>
              <button (click)="onAcceptApplication(application)" *ngIf="application?.accepted !== true"
                      class="btn bg-success btn-sm text-light"
                      type="button">Accept
              </button>
            </div>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xl-9 col-lg-9 col-md-8 col-12">
    <div class="col-12 bg-light p-4 shadow-sm">
      <h2>{{job?.title}}</h2>
      <h6>{{job?.user?.organizationName}}</h6>
      <p class="mt-4">{{job?.description}}</p>
    </div>
  </div>
</div>
